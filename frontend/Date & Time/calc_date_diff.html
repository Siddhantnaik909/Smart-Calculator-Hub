<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMART HUB | Date Difference</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="dashboard-layout" id="dashboard-wrapper">
        <div class="overlay" id="mobile-overlay"></div>
        <aside class="sidebar">
            <div class="brand-block">
                <i class="fa-solid fa-microchip" style="color: var(--primary-color); margin-right: 12px; font-size: 1.5rem;"></i> SMART HUB
            </div>
            <nav class="side-menu">
                <a href="../index.html"><i class="fa fa-home"></i> Dashboard</a>
                <a href="../calculators.html" class="active"><i class="fa-solid fa-calculator"></i> Calculators</a>
                <a href="../history.html"><i class="fa fa-history"></i> History</a>
                <a href="../settings.html"><i class="fa fa-gear"></i> Settings</a>
                <a href="../about.html"><i class="fa fa-circle-info"></i> About</a>
            </nav>
            <div class="sidebar-footer"><p>© 2024 Smart Hub Products.</p></div>
        </aside>
        <main class="main-content">
            <header class="content-header">
                 <div class="mobile-toggle" id="mobile-toggle-btn"><i class="fa fa-bars"></i></div>
                <h1 class="fade-in">Date Difference</h1>
            </header>
            <div class="page-body">
                <section class="container grid-section fade-in delay-1">
                    <div class="cat-card stagger-1">
                        <h3>Select Dates</h3>
                        <div class="sub-cat-list">
                            <div class="sub-link">
                                <span>Start Date</span>
                                <input type="date" id="startDate" class="form-control">
                            </div>
                            <div class="sub-link">
                                <span>End Date</span>
                                <input type="date" id="endDate" class="form-control">
                            </div>
                            <button class="sub-link" onclick="calculateDifference()" style="background-color: var(--primary-color); color: var(--text-white); justify-content: center;">
                                Calculate Difference
                            </button>
                        </div>
                    </div>
                    <div id="resultBox" class="cat-card stagger-2" style="display: none;">
                        <h3>Duration</h3>
                        <div class="sub-cat-list">
                            <div class="sub-link" style="background-color: var(--bg-main);">
                                <span>Years</span><span id="resYears" style="font-weight: bold; color: var(--primary-color);">0</span>
                            </div>
                            <div class="sub-link" style="background-color: var(--bg-main);">
                                <span>Months</span><span id="resMonths" style="font-weight: bold; color: var(--primary-color);">0</span>
                            </div>
                            <div class="sub-link" style="background-color: var(--bg-main);">
                                <span>Days</span><span id="resDays" style="font-weight: bold; color: var(--primary-color);">0</span>
                            </div>
                            <div class="sub-link">
                                <span>Total Days</span><span id="totalDaysSummary" style="font-weight: bold;">0</span>
                            </div>
                        </div>
                    </div>
                </section>
                <footer class="content-footer"><p>SMART HUB | All Rights Reserved © 2025</p></footer>
            </div>
        </main>
    </div>
    <script src="../script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const lastMonth = new Date();
            lastMonth.setMonth(today.getMonth() - 1);
            document.getElementById('endDate').valueAsDate = today;
            document.getElementById('startDate').valueAsDate = lastMonth;
        });

        function calculateDifference() {
            const startVal = document.getElementById('startDate').value;
            const endVal = document.getElementById('endDate').value;

            if (!startVal || !endVal) { alert("Please select both dates"); return; }

            const start = new Date(startVal);
            const end = new Date(endVal);

            let years = end.getFullYear() - start.getFullYear();
            let months = end.getMonth() - start.getMonth();
            let days = end.getDate() - start.getDate();

            if (days < 0) {
                months--;
                days += new Date(end.getFullYear(), end.getMonth(), 0).getDate();
            }
            if (months < 0) { years--; months += 12; }

            years = Math.abs(years);
            months = Math.abs(months);
            days = Math.abs(days);

            const oneDay = 24 * 60 * 60 * 1000;
            const totalDays = Math.round(Math.abs((end - start) / oneDay));

            document.getElementById('resYears').innerText = years;
            document.getElementById('resMonths').innerText = months;
            document.getElementById('resDays').innerText = days;
            document.getElementById('totalDaysSummary').innerHTML = `<b>${totalDays.toLocaleString()} days</b>`;
            document.getElementById('resultBox').style.display = 'block';

            saveCalculation('Date Diff', `Start: ${startVal}, End: ${endVal}`, `Result: ${totalDays} days`);
        }
    </script>
</body>
</html>